<% if can? :read, @group %>
  <div class="container mt-0">
    <div class="d-flex justify-content-between bg-primary text-light align-items-center">
      <%= link_to group_path(@group) do %>
        <i class="bx bxs-chevron-left display-4 text-white"></i>
      <% end %>

      <h3 class="card-title"><%= @group.name %></h3>
      <h3 class="card-subtitle">$<%= @total %></h3>
    </div>

    <div class="row justify-content-center">
      <div class="col-12 col-md-8">
        <div class="card">
          <div class="card-body">
            <% if @group.icon.present? %>
              <%= image_tag(@group.icon, alt: "Group Icon") %>
            <% end %>

            <div class="mt-4 spendings">
              <% @group.spendings.reverse.each do |p| %>
                <div class="card mb-2">
                  <div class="card-body">
                    <p class="card-text"><%= p.name %> - <%= p.created_at.strftime("%d %B %Y")%></p>
                    <p class="card-text">$<%= p.amount %></p>
                  </div>
                </div>
              <% end %>
            </div>
            <div class="text-center mt-4">
              <%= link_to 'Add Transaction', new_group_spending_path(@group), class: "btn btn-primary" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% else %>
  <h1>You are not authorized to view this page</h1>
<% end %>
